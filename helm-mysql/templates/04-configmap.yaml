apiVersion: v1
kind: ConfigMap
metadata:
  name: mysql-operator-config
  namespace: {{.Values.operator.namespace}}
  labels:
    app: mysql-operator
    release: {{ .Release.Name }}
    chart: {{ .Chart.Name }}-{{ .Chart.Version }}
data:
  mysql-operator-config.yaml: |
    images:
      mysqlServer: us.icr.io/msil_gen2_connect_dev/mysql-innodb
      mysqlAgent: avashkumar/mysql-agent

---

apiVersion: v1
kind: ConfigMap
metadata:
  name: innodb-mycnf
  namespace: {{.Values.operator.namespace}}
data:
  my.cnf: |-
    [mysqld]
    skip-host-cache
    skip-name-resolve
    datadir=/var/lib/mysql
    socket=/var/lib/mysql/mysql.sock
    secure-file-priv=/var/lib/mysql-files
    user=mysql

    pid-file=/var/run/mysqld/mysqld.pid
    early-plugin-load = keyring_file.so
    keyring_file_data = /var/lib/mysql/mysql_keyring/keyring

    innodb_buffer_pool_size=12884901888
    max_connections=1000
    default-time-zone='+05:30'


